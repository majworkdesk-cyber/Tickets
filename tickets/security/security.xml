<odoo>
    <data>
        <record id="category_ticket_access" model="ir.module.category">
            <field name="name">Access Ticket</field>
        </record>

        <record id="group_customer_only" model="res.groups">
            <field name="name">Customer (Read Only)</field>
            <field name="category_id" ref="category_ticket_access"/>
        </record>

        <record id="group_sales" model="res.groups">
            <field name="name">Sales (RW Create, No Delete)</field>
            <field name="category_id" ref="category_ticket_access"/>
        </record>

        <record id="group_technician" model="res.groups">
            <field name="name">Technician</field>
            <field name="category_id" ref="category_ticket_access"/>
        </record>

        <record id="group_admin" model="res.groups">
            <field name="name">Admin (Full Access)</field>
            <field name="category_id" ref="category_ticket_access"/>
        </record>

        <!-- Record Rule: Customer hanya bisa baca tiket mereka sendiri -->
        <record id="ticket_rule_customer_own_ticket" model="ir.rule">
            <field name="name">Customer: Own Tickets Only</field>
            <field name="model_id" ref="tickets.model_ticket_name"/>
            <field name="domain_force">[('customer_name_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('tickets.group_customer_only'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <record id="ticket_rule_sales_own_ticket" model="ir.rule">
            <field name="name">Sales: Own Tickets Only</field>
            <field name="model_id" ref="tickets.model_ticket_name"/>
            <field name="domain_force">[('sales_person_id', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('tickets.group_sales'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <record id="ticket_rule_technician_own_ticket" model="ir.rule">
            <field name="name">Technician: Own Tickets Only</field>
            <field name="model_id" ref="tickets.model_ticket_name"/>
            <field name="domain_force">[('technician', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('tickets.group_technician'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

    </data>
</odoo>



